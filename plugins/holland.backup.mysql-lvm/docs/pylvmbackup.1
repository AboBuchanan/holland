.\" Man page generated from reStructeredText.
.TH pylvmbackup 1 "2009-07-26" "0.3" "backup utilities"
.SH NAME
pylvmbackup \- create fast database backups from LVM volumes

.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level magin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..

.SH SYNOPSIS
.INDENT 0.0
.INDENT 3.5
pylvmbackup [options] backup\-directory

.UNINDENT
.UNINDENT

.SH DESCRIPTION
pylvmbackup snapshots an existing LVM volume and backs up the data on
the snapshot.  Mechanisms are in place to flush MySQL data prior to
the snapshot process and unlock immediately after, as well as running
transactional recovery on the snapshot data directory.

pylvmbackup is inspired by mylvmbackup, providing the following additional
benefits:

.INDENT 0.0

.IP 1. 3
All options are optional.  The target lvm mount is determined by the
MySQL data directory.  This is found by using a pre\-existing ~/.my.cnf
to connect to the local server and requesting the server \fBdatadir\fP
variable.


.IP 2. 3
Fully modular approach internally. A message bus architecture signals
various subscribers at each stage of the LVM snapshot lifecycle. MySQL
specific behavior is only a "plugin" and can be removed or replaced
(e.g. by Postgres specific paths) without affecting any other code.


.IP 3. 3
Paranoia about removing snapshots at all costs


.IP 4. 3
Less convoluted options


.IP 5. 3
No dependencies other than the lvm2 toolchain and python2.3+

.UNINDENT
pylvmbackup currently lacks the following features of mylvmbackup:

.INDENT 0.0

.IP 1. 3
No syslog support yet.


.IP 2. 3
Only tar based backups are currently supported.


.IP 3. 3
No snapshot only backups.

.UNINDENT

.SH OPTIONS
\-?, \-\-help              Show help.
\-c config\-file, \-\-config=config\-file
Use the specified config file (default: /etc/pylvmbackup.conf)


.SS LVM Options
.INDENT 0.0

.TP
.BI \-\-logical\-volume\fn= lvname
The name for the logical volume to be backed up.
(default: autodetect)


.TP
.BI \-\-snapshot\-name\fn= snapshot
The name for the new logical volume snapshot.
(default: target volume + _snapshot)


.TP
.BI \-\-snapshot\-size\fn= size
Gives  the  size to allocate for the new logical
volume. (default: the smaller of 20% of \-\-logical\-
volume size or the free space on the underlying volume
group)


.TP
.BI \-\-mount\-directory\fn= mount\-directory
Where to mount the snapshot (default: /mnt/snapshot)

.UNINDENT

.SS MySQL Connection Options
.INDENT 0.0
.INDENT 3.5
These options configure how pylvmbackup connects to MySQL in order to
perform any necessary flush or administrative actions.

.UNINDENT
.UNINDENT
.INDENT 0.0

.TP
.BI \-\-defaults\-file\fn= option\-file
MySQL .cnf file to use (default: ~/.my.cnf)


.TP
.BI \-u\  user ,\ \-\-user\fn= user
MySQL User (default: root)


.TP
.B \-p , \-\-password
Prompt for MySQL password. Note: This option takes no
argument. Setting a password on the command line is
bad practice \- use a \-\-defaults\-file instead.
(default: False)


.TP
.BI \-h\  host ,\ \-\-host\fn= host
Host of MySQL Server. (default: localhost)


.TP
.BI \-S\  socket\-file ,\ \-\-socket\fn= socket\-file
Socket file of MySQL server. (default: none)


.TP
.BI \-P\  port ,\ \-\-port\fn= port
MySQL port number. (default: 3306)


.TP
.B \-\-skip\-extra\-flush\-tables
Don\'t Run an extra FLUSH TABLES before acquiring a
global read lock with FLUSH TABLES WITH READ LOCK
(default: False)


.TP
.B \-\-skip\-flush\-tables
Don\'t flush tables or acquire a read\-lock.(default:
False)


.TP
.B \-\-innodb\-recovery
Run a MySQL bootstrap process against the LV snapshot
to initiate InnoDB recovery prior to making the
backup. (default: True)

.UNINDENT

.SH PROBLEMS
.INDENT 0.0

.IP 1. 3
Config file not yet implemented.


.IP 2. 3
EINTR handling could be improved.


.IP 3. 3
More intelligent backup management.

.UNINDENT

.SH SEE ALSO
.INDENT 0.0

.IP \(bu 2
\fBmylvmbackup <http://www.lenzg.net/mylvmbackup>\fP


.IP \(bu 2
\fBholland <http://hollandbackup.org>\fP

.UNINDENT

.SH BUGS
.INDENT 0.0

.IP \(bu 2
Postgres not supported

.UNINDENT

.SH AUTHOR
andrew.garner@rackspace.com

.SH COPYRIGHT
Rackspace Proprietary

.\" Generated by docutils manpage writer on 2009-07-26 20:24.
.\" 
